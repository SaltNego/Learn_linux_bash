## iptables防火墙规则学习


> 查看本机iptables配置

````bash
root@Righteous:~# iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
Chain FORWARD (policy ACCEPT)
target     prot opt source               destination
Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
````
初始化iptables

````bash
# 删除所有规则和链
root@Righteous:~# iptables -F
root@Righteous:~# iptables -X
root@Righteous:~# iptables -L -n
Chain INPUT (policy ACCEPT)
target     prot opt source               destination
Chain FORWARD (policy ACCEPT)
target     prot opt source               destination
Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination
# 保存规则
root@Righteous:~# iptables-save
# Generated by iptables-save v1.6.0 on Fri Nov 22 23:11:06 2019
*filter
:INPUT ACCEPT [93:6184]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [92:6848]
COMMIT
# Completed on Fri Nov 22 23:11:06 2019
root@Righteous:~#
````
### 开启web服务作为验证用
````bash
root@Righteous:/tmp/tmp# python -m simple
simplegeneric  simplejson
root@Righteous:/tmp/tmp# pwd
/tmp/tmp
root@Righteous:/tmp/tmp# python -m SimpleHTTPServer 80
Serving HTTP on 0.0.0.0 port 80 ...
````
![](https://raw.githubusercontent.com/SaltNego/MarkdownPics/master/image/20200109181630.png)


### 机器全断网操作
````bash
root@Righteous:~# iptables -P INPUT DROP
root@Righteous:~# iptables -P OUTPUT DROP
```
